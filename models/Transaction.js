const mongoose = require("mongoose");

// üí≥ ‡∏™‡∏£‡πâ‡∏≤‡∏á Schema ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (Transaction)
const transactionSchema = new mongoose.Schema({
  // üí∞ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° ‡πÄ‡∏ä‡πà‡∏ô 1000 ‡∏ö‡∏≤‡∏ó
  amount: { 
    type: Number, 
    required: true 
  },
  // üîÑ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° - "‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"
  type: { 
    type: String, 
    enum: ["deposit", "withdraw"],  // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ
    required: true 
  },
  // üóìÔ∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
  date: { 
    type: Date, 
    default: Date.now 
  },
  // üéØ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Goal) ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ
  goal: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: "Goal",
    required: true 
  },
  // üë§ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°
  user: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: "User" 
  },
  // üî∏ ‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ field durationType ‡πÅ‡∏•‡∏∞ duration ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô schema ‡∏ô‡∏µ‡πâ)
}, { 
  // üïì ‡πÄ‡∏û‡∏¥‡πà‡∏° timestamps ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö createdAt ‡πÅ‡∏•‡∏∞ updatedAt ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
  timestamps: true
});

// üè∑Ô∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å model "Transaction"
module.exports = mongoose.model("Transaction", transactionSchema);
